# Default parameters for the AI Futures Simulator
#
# Parameters can be point estimates or distributions for Monte Carlo sampling:
#   r_software: 2.4              # Point estimate
#   r_software:                   # Distribution
#     dist: uniform
#     min: 2.0
#     max: 3.0
#
# Supported distributions: uniform, normal, lognormal, triangular

seed: 42
initial_progress: 0.0

# =============================================================================
# SIMULATION SETTINGS
# =============================================================================
settings:
  simulation_start_year: 2026
  simulation_end_year: 2040.0
  n_eval_points: 100
  # ODE solver settings (tuned for speed, <1% final error)
  ode_rtol: 0.002     # Relative tolerance
  ode_atol: 0.00005   # Absolute tolerance
  ode_max_step: 1.0   # Max step size in years

# =============================================================================
# SOFTWARE R&D PARAMETERS
#
# NOTE: Some parameters below are set to null because they are CALIBRATED
# at runtime by parameters/calibrate.py. The calibration uses anchor parameters
# (like software_progress_rate_at_reference_year, swe_multiplier_at_present_day)
# to compute the actual CES parameters. See calibrate.py for details.
# =============================================================================
software_r_and_d:
  # =========================================================================
  # MODE FLAGS
  # =========================================================================
  update_software_progress: true

  # =========================================================================
  # PRODUCTION FUNCTION PARAMETERS (CES)
  # =========================================================================
  # Coding labor CES
  rho_coding_labor: -2.0
  coding_labor_normalization: 1.0

  # Experiment capacity CES
  # These are CALIBRATED from the anchor parameters below - leave as null
  direct_input_exp_cap_ces_params: false
  rho_experiment_capacity: null      # Calibrated from anchor params
  alpha_experiment_capacity: null    # Calibrated from anchor params
  experiment_compute_exponent: null  # Calibrated from anchor params

  # Experiment capacity anchor parameters (used by calibration)
  inf_labor_asymptote: 15.0
  inf_compute_asymptote: 1000.0
  labor_anchor_exp_cap: 1.6
  compute_anchor_exp_cap: null
  inv_compute_anchor_exp_cap: 2.8

  # Parallel penalty
  parallel_penalty: 0.5

  # =========================================================================
  # SOFTWARE PROGRESS PARAMETERS
  # =========================================================================
  # r_software is CALIBRATED from software_progress_rate_at_reference_year - leave as null
  r_software: null
  software_progress_rate_at_reference_year: 1.0  # Match reference model's DEFAULT_PARAMETERS

  # =========================================================================
  # AUTOMATION SCHEDULE PARAMETERS
  # =========================================================================
  automation_fraction_at_coding_automation_anchor: 1.0
  # automation_anchors is CALIBRATED from swe_multiplier_at_present_day - leave as null
  automation_anchors: null
  automation_interp_type: "logistic"
  automation_logistic_asymptote: 1.1  # Match reference model's DEFAULT_PARAMETERS
  swe_multiplier_at_present_day: 1.6

  # Coding labor mode
  coding_labor_mode: "optimal_ces"
  coding_automation_efficiency_slope: 3.0
  optimal_ces_eta_init: 0.05
  optimal_ces_grid_size: 4096
  optimal_ces_frontier_tail_eps: 0.000001
  optimal_ces_frontier_cap: 1000000000000.0
  max_serial_coding_labor_multiplier: 100000000.0

  # =========================================================================
  # AI RESEARCH TASTE PARAMETERS
  # =========================================================================
  ai_research_taste_at_coding_automation_anchor_sd: 0.5
  ai_research_taste_slope: 2.2
  taste_schedule_type: "SDs per progress-year"

  # Research taste distribution
  median_to_top_taste_multiplier: 3.7
  top_percentile: 0.999
  taste_limit: 8.0
  taste_limit_smoothing: 0.51

  # =========================================================================
  # HORIZON / MILESTONE PARAMETERS
  # =========================================================================
  progress_at_aa: null
  ac_time_horizon_minutes: 12000000.0
  pre_gap_ac_time_horizon: 124600.0
  horizon_extrapolation_type: "decaying doubling time"

  # Manual horizon fitting
  present_day: 2025.6
  present_horizon: 26.0
  present_doubling_time: 0.458
  doubling_difficulty_growth_factor: 0.920

  # Capability milestones
  strat_ai_m2b: 2.0
  ted_ai_m2b: 3.0

  # =========================================================================
  # GAP MODE PARAMETERS
  # =========================================================================
  include_gap: "no gap"
  gap_years: 1.5

# =============================================================================
# COMPUTE PARAMETERS
# =============================================================================
compute:
  # Exogenous technology trends
  exogenous_trends:
    transistor_density_scaling_exponent: 1.49
    state_of_the_art_architecture_efficiency_improvement_per_year: 1.23
    # Energy efficiency parameters (Dennard scaling)
    transistor_density_at_end_of_dennard_scaling_m_per_mm2: 10.0
    watts_per_tpp_vs_transistor_density_exponent_before_dennard_scaling_ended: -1.0
    watts_per_tpp_vs_transistor_density_exponent_after_dennard_scaling_ended: -0.33
    state_of_the_art_energy_efficiency_improvement_per_year: 1.26

  # Chip survival/attrition parameters
  survival_rate_parameters:
    initial_annual_hazard_rate: 0.01  # Per year (base p50 value)
    annual_hazard_rate_increase_per_year: 0.0035  # Per year^2 (base p50 value)
    # Multiplier applied to both hazard rates (discrete model uses metalog p25=0.1, p50=1.0, p75=6.0)
    # Using lognormal with ci80=[0.1, 6.0] to better match discrete model's spread
    hazard_rate_multiplier:
      dist: lognormal
      ci80: [0.1, 6.0]

  # US compute parameters
  us_compute:
    us_frontier_project_compute_tpp_h100e_in_2025: 120325.0
    us_frontier_project_compute_annual_growth_rate: 4.0  # ~4x per year
    proportion_of_compute_in_largest_ai_sw_developer: 0.3
    # Training compute slowdown (matches old model's behavior from new_simulator_default.csv)
    slowdown_year: 2028.0
    post_slowdown_training_compute_growth_rate: 0.25  # OOMs/year (10^0.25 ≈ 1.78x/year)

  # PRC compute parameters (with uncertainty for Monte Carlo)
  prc_compute:
    # Discrete model uses fixed 100k H100e in 2025
    total_prc_compute_tpp_h100e_in_2025: 100000.0
    # Growth rate: discrete uses metalog with p10=1.3, p50=2.2, p90=3.0
    # Approximate with lognormal using ci80=[1.3, 3.0]
    annual_growth_rate_of_prc_compute_stock:
      dist: lognormal
      ci80: [1.3, 3.0]  # Matches discrete model metalog (p10=1.3, p50=2.2, p90=3.0)
    proportion_of_compute_in_largest_ai_sw_developer: 0.5
    prc_architecture_efficiency_relative_to_state_of_the_art: 1.0
    # Domestic production capability
    proportion_of_prc_chip_stock_produced_domestically_2026: 0.10
    proportion_of_prc_chip_stock_produced_domestically_2030: 0.40
    # PRC lithography scanner production
    prc_lithography_scanners_produced_in_first_year: 20.0
    prc_additional_lithography_scanners_produced_per_year: 16.0
    # PRC localization probabilities (by process node and year)
    p_localization_28nm_2030: 0.25
    p_localization_14nm_2030: 0.10
    p_localization_7nm_2030: 0.06
    # Fab production parameters
    h100_sized_chips_per_wafer: 28.0
    wafers_per_month_per_lithography_scanner: 1000.0
    construction_time_for_5k_wafers_per_month: 1.4
    construction_time_for_100k_wafers_per_month: 2.41
    # Fab construction time multiplier (default 1.0, sampled from lognormal in monte carlo mode)
    fab_construction_time_multiplier: 1.0
    # Worker-to-capacity conversion parameters (for black projects)
    fab_wafers_per_month_per_operating_worker: 24.64
    fab_wafers_per_month_per_construction_worker_under_standard_timeline: 14.1

# =============================================================================
# DATACENTER AND ENERGY PARAMETERS
# =============================================================================
datacenter_and_energy:
  prc_energy_consumption:
    energy_efficiency_of_compute_stock_relative_to_state_of_the_art: 0.20
    total_prc_energy_consumption_gw: 1100.0
    # Datacenter worker-to-capacity conversion parameters (for black projects)
    data_center_mw_per_year_per_construction_worker: 0.13  # Reference: 0.13
    data_center_mw_per_operating_worker: 1.0  # Reference: 1 operating worker per MW
    # H100 power consumption in watts (~700W typical for H100)
    h100_power_watts: 700.0

# =============================================================================
# POLICY PARAMETERS
# =============================================================================
policy:
  ai_slowdown_start_year: 2030.0

# =============================================================================
# BLACK PROJECT PARAMETERS
# =============================================================================
black_project:
  run_a_black_project: true
  black_project_start_year: 2029.0

  # User-configurable project properties (with uncertainty for Monte Carlo)
  properties:
    # Labor allocation (total labor and fractions)
    total_labor: 11300
    fraction_of_labor_devoted_to_datacenter_construction: 0.885  # 10000/11300
    fraction_of_labor_devoted_to_black_fab_construction: 0.022   # 250/11300
    fraction_of_labor_devoted_to_black_fab_operation: 0.049      # 550/11300
    fraction_of_labor_devoted_to_ai_research: 0.044              # 500/11300
    # Diverted resources (with uncertainty)
    fraction_of_initial_compute_stock_to_divert_at_black_project_start: 0.05  # Reference: 5%
    fraction_of_datacenter_capacity_not_built_for_concealment_to_divert_at_black_project_start: 0.01  # Reference: 1% diversion
    fraction_of_lithography_scanners_to_divert_at_black_project_start:
      dist: uniform
      min: 0.05
      max: 0.15  # 5% to 15% diversion
    max_fraction_of_total_national_energy_consumption: 0.05
    # Datacenter construction timing
    # Discrete model starts construction 1 year before black project start
    years_before_black_project_start_to_begin_datacenter_construction: 1.0
    # Fab configuration
    # Fab is built if prc_localization_year_for_min_node <= black_project_start_year
    black_fab_min_process_node: 28.0  # Minimum required process node (nm)
    # PRC localization year - sampled from distribution matching discrete model
    # Based on discrete model: 28nm has 0% at 2025, 60% at 2031 (linear interpolation)
    # Linear interpolation gives ~10% per year from 2026-2031, 40% never
    # For black_project_start_year=2029: P(localization <= 2029) = 40%
    prc_localization_year_for_min_node:
      dist: choice
      values: [2026, 2027, 2028, 2029, 2030, 2031, 9999]  # 9999 = never achieved
      p: [0.10, 0.10, 0.10, 0.10, 0.10, 0.10, 0.40]  # 40% by 2029, 60% by 2031, 40% never

# =============================================================================
# PERCEPTIONS PARAMETERS
#
# Parameters for updating state perceptions about covert AI projects.
# =============================================================================
perceptions:
  # Enable/disable perceptions updating
  update_perceptions: true

  # Black project detection parameters (with uncertainty for Monte Carlo)
  black_project_perception_parameters:
    # Prior odds that a covert project exists (odds = p / (1-p))
    prior_odds_of_covert_project: 0.25  # Reference: 20% probability = 0.25 odds
    # US intelligence estimation error (median absolute relative error)
    intelligence_median_error_in_estimate_of_compute_stock: 0.07  # Reference: 7%
    intelligence_median_error_in_estimate_of_fab_stock: 0.07  # Reference: 7%
    intelligence_median_error_in_energy_consumption_estimate_of_datacenter_capacity: 0.05  # Reference: 5%
    intelligence_median_error_in_satellite_estimate_of_datacenter_capacity: 0.05  # Reference: 5%
    # Worker detection model (Gamma distribution parameters)
    # Detection time ~ Gamma(k, theta) where k = mean/sigma, theta = sigma
    mean_detection_time_for_100_workers: 6.95  # Reference: 6.95 years
    mean_detection_time_for_1000_workers: 3.42  # Reference: 3.42 years
    variance_of_detection_time_given_num_workers: 15.05  # This is σ² where σ=3.88 is the scale parameter
    # Likelihood ratio thresholds for detection
    detection_threshold: 100.0
    detection_thresholds: [1, 2, 4]
